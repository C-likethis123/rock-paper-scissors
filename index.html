<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<body>
	<script language = "javascript">
		const valid_options = ['Rock', 'Paper', 'Scissors'];

		function computerPlay() {
			let randomIndex = Math.floor(Math.random() * 3);
			return valid_options[randomIndex];
		}

		function capitalize(string) {
			return string[0].toUpperCase() + string.substring(1).toLowerCase();
		}

		function playRound(playerSelection, computerSelection) {
			playerSelection = capitalize(playerSelection);
			if (playerSelection == computerSelection) {
				return "tie";
			} else if (playerSelection == "Scissors") {
				return computerSelection == "Paper" 
					? "win"
					: "lose";

			} else if (playerSelection == "Rock") {
				return computerSelection == "Scissors"
					? "win"
					: "lose";

			} else if (playerSelection == "Paper") {
				return computerSelection == "Rock"
					? "win"
					: "lose";
			} else {
				console.log("You entered an invalid value!");
			}
		}

		function getOutput(playerSelection, computerSelection, outcome) {
			if (outcome == "tie") {
				return "It's a tie! Both chose " + playerSelection;
			} else if (outcome == "win") {
				return "You win! " + playerSelection + " beats " + computerSelection;
			} else {
				return "You lose! " + playerSelection + " loses to " + computerSelection;
			}
		}

		function getWinner(playerScore, computerScore) {
			if (playerScore > computerScore) {
				return "You win! You: " + playerScore + " Computer: " + computerScore;
			} else if (playerScore < computerScore) {
				return "You lose! You: " + playerScore + " Computer: " + computerScore;
			} else {
				return "It's a tie! You: " + playerScore + " Computer: " + computerScore;
			}

		}

		function game() {
			let playerScore = 0, computerScore = 0;

			for (let i = 0; i < 5; i++) {
				let playerSelection = prompt();
				let computerSelection = computerPlay();
				let outcome = playRound(playerSelection, computerSelection);

				if (outcome == "win") {
					playerScore++;
				}

				if (outcome == "lose") {
					computerScore++;
				}

				console.log(getOutput(playerSelection, computerSelection, outcome));
			}

			console.log("Game ended. " + getWinner(playerScore, computerScore));
		}

		game();
	</script>
</body>
</html>