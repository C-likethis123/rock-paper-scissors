<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<body>
	<center>
		<h1> Choose 1! </h1>
		<div class="resultDisplay"></div>
		<div class="winnerAnnouncement"></div>
		<button value="Scissors">Scissors</button>
		<button value="Rock">Rock</button>
		<button value="Paper">Paper</button>
	</center>

	<script language = "javascript">
		const valid_options = ['Rock', 'Paper', 'Scissors'];

		function computerPlay() {
			let randomIndex = Math.floor(Math.random() * 3);
			return valid_options[randomIndex];
		}

		function capitalize(string) {
			return string[0].toUpperCase() + string.substring(1).toLowerCase();
		}

		function playRound(playerSelection, computerSelection) {
			playerSelection = capitalize(playerSelection);
			if (playerSelection == computerSelection) {
				return "tie";
			} else if (playerSelection == "Scissors") {
				return computerSelection == "Paper" 
					? "win"
					: "lose";

			} else if (playerSelection == "Rock") {
				return computerSelection == "Scissors"
					? "win"
					: "lose";

			} else if (playerSelection == "Paper") {
				return computerSelection == "Rock"
					? "win"
					: "lose";
			} else {
				console.log("You entered an invalid value!");
			}
		}

		function getOutput(playerSelection, computerSelection, outcome) {
			if (outcome == "tie") {
				return "It's a tie! Both chose " + playerSelection;
			} else if (outcome == "win") {
				return "You win! " + playerSelection + " beats " + computerSelection;
			} else {
				return "You lose! " + playerSelection + " loses to " + computerSelection;
			}
		}

		function getWinner(playerScore, computerScore) {
			if (playerScore > computerScore) {
				return "You win! You: " + playerScore + " Computer: " + computerScore;
			} else if (playerScore < computerScore) {
				return "You lose! You: " + playerScore + " Computer: " + computerScore;
			} else {
				return "It's a tie! You: " + playerScore + " Computer: " + computerScore;
			}

		}
		
		function createOutputDisplay(outputString) {
			const result_display = document.querySelector('.resultDisplay');
			result_display.textContent = outputString;
		}

		function announceWinner(playerScore, computerScore) {
			let winner = playerScore > computerScore ? "You" : "Computer";
			const announcement = `${winner} wins!`;

			const winnerAnnouncement = document.querySelector('.winnerAnnouncement');
			result_display.textContent = announcement;
		}

		function game() {
			let playerScore = 0, computerScore = 0;
			const buttons = document.querySelectorAll('button');
			let playerSelection;
			do {
			
				buttons.forEach(button => button.addEventListener('click', function(e) {
					let playerSelection = e.target.value;
					let computerSelection = computerPlay();
					let outcome = playRound(playerSelection, computerSelection);
					if (outcome == "win") {
						playerScore++;
					}

					if (outcome == "lose") {
						computerScore++;
					}
					let outputString = getOutput(playerSelection, computerSelection, outcome);

					createOutputDisplay(outputString);
				}))
				} while (playerScore < 5 && computerScore < 5);

			announceWinner(playerScore, computerScore);
		}
		
				
		
	</script>
</body>
</html>